version: 1.0
runtime: python3
build:
  commands:
    build:
      - echo "Installing Python dependencies..."
      - pip install --upgrade pip
      - pip install -r requirements.txt
      - echo "Creating necessary directories..."
      - mkdir -p data/eea/renewable-energy data/eea/pollution logs reference
      - echo "Build completed successfully"
run:
  runtime-version: '3.11'
  command: python run_server.py
  network:
    port: 5000
    env: PORT
  env:
    - name: FLASK_ENV
      value: "production"
    - name: FLASK_DEBUG  
      value: "0"
    - name: PYTHONPATH
      value: "/opt/app"
    - name: PYTHONUNBUFFERED
      value: "1"
    - name: API_KEYS
      value: "demo_key_basic_2025:DemoBasic:basic,demo_key_premium_2025:DemoPremium:premium"
